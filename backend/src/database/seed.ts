import { MongoClient } from 'mongodb';
import * as dotenv from 'dotenv';
import * as path from 'path';

dotenv.config({ path: path.resolve(__dirname, '../../../.env') });

const MONGODB_URI = process.env.MONGODB_URI;

const testServices = [
 {
    slug: "it-infrastructure",
    title: "Развитие и поддержка ИТ-инфраструктуры",
    category: "Infrastructure",
    description: "Комплексное обслуживание и развитие ИТ-инфраструктуры для обеспечения стабильной работы бизнес-процессов и цифровой трансформации компании",
    features: [
      "Мониторинг систем 24/7",
      "Резервное копирование данных",
      "Кибербезопасность и защита",
      "Обновление и модернизация оборудования",
      "Миграция в облачные решения",
      "Техническая документация и отчетность",
      "Проактивное обслуживание",
      "Поддержка серверов и сетей"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2025-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "ip-telephony",
    title: "Внедрение IP-телефонии «под ключ»",
    category: "Communication",
    description: "Полный цикл внедрения современной IP-телефонии с интеграцией в существующую ИТ-инфраструктуру и обучением сотрудников",
    features: [
      "Настройка VoIP-сервера",
      "Подбор и настройка IP-телефонов",
      "Интеграция с CRM-системой",
      "Голосовая почта и автосекретарь",
      "Конференц-связь и видеозвонки",
      "Мобильное приложение для сотрудников",
      "Аналитика и отчетность по звонкам",
      "Техническая поддержка 24/7"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "regulatory-compliance-audit",
    title: "Аудит и приведение в соответствие регуляторам",
    category: "Compliance",
    description: "Комплексный аудит ИТ-систем и процессов на соответствие требованиям регуляторов с разработкой плана устранения нарушений",
    features: [
      "Аудит защиты персональных данных",
      "Проверка соответствия 152-ФЗ",
      "Анализ финансовых стандартов (ЦБ РФ)",
      "Проверка корпоративных систем",
      "Оценка кибербезопасности",
      "Документация и регламенты",
      "Подготовка к проверкам",
      "Консультации по compliance"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "software-development",
    title: "Разработка программного обеспечения",
    category: "Development",
    description: "Создание качественного программного обеспечения полного цикла: от анализа требований до внедрения и технической поддержки",
    features: [
      "Проектирование архитектуры",
      "Full-stack разработка",
      "Интеграция с внешними API",
      "Базы данных и оптимизация",
      "Тестирование и QA",
      "Документация",
      "Развертывание и DevOps",
      "Техническая поддержка"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "video-surveillance-security",
    title: "Системы видеонаблюдения и безопасности",
    category: "Security",
    description: "Проектирование и внедрение комплексных систем видеонаблюдения и безопасности с удаленным доступом и аналитикой",
    features: [
      "Проектирование системы безопасности",
      "Установка камер видеонаблюдения",
      "Системы контроля доступа",
      "Облачное хранение записей",
      "Аналитика видео (распознавание лиц)",
      "Удаленный мониторинг",
      "Интеграция с охранной сигнализацией",
      "Техническое обслуживание"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "devops-practices-implementation",
    title: "Внедрение DevOps-практик",
    category: "Infrastructure",
    description: "Внедрение современных DevOps-практик для ускорения разработки, повышения надежности и автоматизации процессов",
    features: [
      "Настройка CI/CD пайплайнов",
      "Автоматизация развертывания",
      "Контейнеризация (Docker, Kubernetes)",
      "Инфраструктура как код (Terraform)",
      "Мониторинг и логирование",
      "Управление конфигурациями",
      "Безопасность DevSecOps",
      "Обучение команды"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "it-security-audit",
    title: "Комплексный аудит ИТ и ИБ",
    category: "Security",
    description: "Полномасштабный аудит информационных технологий и информационной безопасности с выдачей рекомендаций по устранению уязвимостей",
    features: [
      "Аудит сетевой безопасности",
      "Пентест и анализ уязвимостей",
      "Проверка соответствия ФСТЭК и ФСБ",
      "Аудит систем хранения данных",
      "Анализ политик безопасности",
      "Проверка резервного копирования",
      "Оценка рисков ИБ",
      "Рекомендации по защите"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
  {
    slug: "ai-bi-integration",
    title: "Интеграция готовых ИИ-решений и BI-систем",
    category: "Analytics",
    description: "Внедрение и интеграция готовых решений искусственного интеллекта и бизнес-аналитики для автоматизации процессов и улучшения принятия решений",
    features: [
      "Интеграция AI/ML моделей",
      "Настройка BI-дашбордов",
      "Подключение к источникам данных",
      "Автоматизация отчетности",
      "Прогнозная аналитика",
      "Интеграция с CRM и ERP",
      "Обучение сотрудников",
      "Техническая поддержка"
    ],
    marketPriceRange: {
      min: 100000,
      max: 500000
    },
    priceDump: {
      min: 80000,
      max: 400000,
      activeUntil: "2026-08-30T00:00:00.000Z"
    },
    pricePostDump: {
      min: 120000,
      max: 600000
    },
    options: [],
    isActive: true
  },
];

async function seedServices() {
  const client = new MongoClient(MONGODB_URI);
  
  try {
    await client.connect();
    console.log('Connected to MongoDB');
    
    const db = client.db();
    const servicesCollection = db.collection('services');
    
    await servicesCollection.deleteMany({});
    console.log('Old services cleared');
    
    const result = await servicesCollection.insertMany(testServices);
    console.log(`Created ${result.insertedCount} test services`);
    
    const services = await servicesCollection.find({}).toArray();
    console.log('Services in database:', services.map(s => s.title || "Empty array"));
    
  } catch (error) {
    console.error('Error seeding services:', error);
    process.exit(1);
  } finally {
    await client.close();
  }
}

seedServices();



//  {
//     slug: "it-infrastructure",
//     title: "Развитие и поддержка ИТ-инфраструктуры",
//     category: "Infrastructure",
//     description: "Комплексное обслуживание и развитие ИТ-инфраструктуры для обеспечения стабильной работы бизнес-процессов и цифровой трансформации компании",
//     features: [
//       "Мониторинг систем 24/7",
//       "Резервное копирование данных",
//       "Кибербезопасность и защита",
//       "Обновление и модернизация оборудования",
//       "Миграция в облачные решения",
//       "Техническая документация и отчетность",
//       "Проактивное обслуживание",
//       "Поддержка серверов и сетей"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2025-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "ip-telephony",
//     title: "Внедрение IP-телефонии «под ключ»",
//     category: "Communication",
//     description: "Полный цикл внедрения современной IP-телефонии с интеграцией в существующую ИТ-инфраструктуру и обучением сотрудников",
//     features: [
//       "Настройка VoIP-сервера",
//       "Подбор и настройка IP-телефонов",
//       "Интеграция с CRM-системой",
//       "Голосовая почта и автосекретарь",
//       "Конференц-связь и видеозвонки",
//       "Мобильное приложение для сотрудников",
//       "Аналитика и отчетность по звонкам",
//       "Техническая поддержка 24/7"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "regulatory-compliance-audit",
//     title: "Аудит и приведение в соответствие регуляторам",
//     category: "Compliance",
//     description: "Комплексный аудит ИТ-систем и процессов на соответствие требованиям регуляторов с разработкой плана устранения нарушений",
//     features: [
//       "Аудит защиты персональных данных",
//       "Проверка соответствия 152-ФЗ",
//       "Анализ финансовых стандартов (ЦБ РФ)",
//       "Проверка корпоративных систем",
//       "Оценка кибербезопасности",
//       "Документация и регламенты",
//       "Подготовка к проверкам",
//       "Консультации по compliance"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "software-development",
//     title: "Разработка программного обеспечения",
//     category: "Development",
//     description: "Создание качественного программного обеспечения полного цикла: от анализа требований до внедрения и технической поддержки",
//     features: [
//       "Проектирование архитектуры",
//       "Full-stack разработка",
//       "Интеграция с внешними API",
//       "Базы данных и оптимизация",
//       "Тестирование и QA",
//       "Документация",
//       "Развертывание и DevOps",
//       "Техническая поддержка"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "video-surveillance-security",
//     title: "Системы видеонаблюдения и безопасности",
//     category: "Security",
//     description: "Проектирование и внедрение комплексных систем видеонаблюдения и безопасности с удаленным доступом и аналитикой",
//     features: [
//       "Проектирование системы безопасности",
//       "Установка камер видеонаблюдения",
//       "Системы контроля доступа",
//       "Облачное хранение записей",
//       "Аналитика видео (распознавание лиц)",
//       "Удаленный мониторинг",
//       "Интеграция с охранной сигнализацией",
//       "Техническое обслуживание"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "devops-practices-implementation",
//     title: "Внедрение DevOps-практик",
//     category: "Infrastructure",
//     description: "Внедрение современных DevOps-практик для ускорения разработки, повышения надежности и автоматизации процессов",
//     features: [
//       "Настройка CI/CD пайплайнов",
//       "Автоматизация развертывания",
//       "Контейнеризация (Docker, Kubernetes)",
//       "Инфраструктура как код (Terraform)",
//       "Мониторинг и логирование",
//       "Управление конфигурациями",
//       "Безопасность DevSecOps",
//       "Обучение команды"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "it-security-audit",
//     title: "Комплексный аудит ИТ и ИБ",
//     category: "Security",
//     description: "Полномасштабный аудит информационных технологий и информационной безопасности с выдачей рекомендаций по устранению уязвимостей",
//     features: [
//       "Аудит сетевой безопасности",
//       "Пентест и анализ уязвимостей",
//       "Проверка соответствия ФСТЭК и ФСБ",
//       "Аудит систем хранения данных",
//       "Анализ политик безопасности",
//       "Проверка резервного копирования",
//       "Оценка рисков ИБ",
//       "Рекомендации по защите"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },
//   {
//     slug: "ai-bi-integration",
//     title: "Интеграция готовых ИИ-решений и BI-систем",
//     category: "Analytics",
//     description: "Внедрение и интеграция готовых решений искусственного интеллекта и бизнес-аналитики для автоматизации процессов и улучшения принятия решений",
//     features: [
//       "Интеграция AI/ML моделей",
//       "Настройка BI-дашбордов",
//       "Подключение к источникам данных",
//       "Автоматизация отчетности",
//       "Прогнозная аналитика",
//       "Интеграция с CRM и ERP",
//       "Обучение сотрудников",
//       "Техническая поддержка"
//     ],
//     marketPriceRange: {
//       min: 100000,
//       max: 500000
//     },
//     priceDump: {
//       min: 80000,
//       max: 400000,
//       activeUntil: "2026-08-30T00:00:00.000Z"
//     },
//     pricePostDump: {
//       min: 120000,
//       max: 600000
//     },
//     options: [],
//     isActive: true
//   },